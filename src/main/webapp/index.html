<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="js/Filter.js"></script>
    <script src="js/Search.js"></script>
    <script src="js/Settings.js"></script>


    <!-- Bootstrap 5 Main -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- Bootstrap 5 Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">

    <!-- Bootstrap 5 Main -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Statistics Main -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.0.0/chartjs-plugin-datalabels.min.js" integrity="sha512-R/QOHLpV1Ggq22vfDAWYOaMd5RopHrJNMxi8/lJu8Oihwi4Ho4BRFeiMiCefn9rasajKjnx9/fTQ/xkWnkDACg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>

    <!-- Initiate datepickers -->
    <script>
        $( function() {
            $( "#startDate" ).datepicker({
                dateFormat: "dd.mm.yy"
            });
            setMinMaxDate("startDate");
        });

        $( function() {
            $( "#endDate" ).datepicker({
                dateFormat: "dd.mm.yy"
            });
            setMinMaxDate("endDate");
        });
    </script>

    <title>Main</title>
    <style>
        .searchbar, .filter-menu, .statistics, .logfile-results{
            margin-right: 3rem;
            margin-left: 3rem;
            margin-top: 2rem;
        }

        .filter-header{
            border-bottom: solid black 1px;
        }

        .chartHeight{
            height: 400px;
        }

        .table-wrapper {
            max-height: 15rem;
            overflow: auto;
            display: block;
        }

        nav{
            background-color: #fff200;
            white-space: nowrap;
        }

        .log-textArea{
            resize: none;
        }

        .log-table{
            border-collapse: separate;
        }

        .sticky-header{
            top: 0;
            position: sticky;
            background-color: white;
        }

        .button-style{
            background-color: #fff200;
            color: black;
        }

        .search-button{
            margin-left: 1rem;
            background-color: #fff200;
        }

        .search-bar{
            max-width: 40rem;
        }

        .log-date{
            background-color: #fff200;
        }

        .log-center{
            display: flex;
            align-items: center;
        }

        .badge-color{
            font-family: monospace;
            color: black;

        }

        #statisticsHolder{
            margin-top: 1rem;
        }

        @media only screen and (max-width: 768px) {
            .introduction > div{
                margin-left: auto;
                margin-right: auto;
            }
            .badge-color{
                width: 4rem;
            }
        }
    </style>
</head>
<body onload="loadCookies()">

<!-- NavBar -->
<nav class="navbar navbar-expand-lg navbar-light sticky-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">
            <img src="images/ssi_logo.svg" alt="..." width="200" height="40" style="object-fit: contain">
        </a>
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 fs-6">
            <li class="nav-item px-3 my-auto">
                <a data-bs-toggle="modal" data-bs-target="#settingsModal">
                    <i class="bi bi-gear-fill fs-3"></i>
                </a>
            </li>
        </ul>
    </div>
</nav>
<!-- NavBar -->



<form class="needs-validation" novalidate>
<div class="searchbar">
    <div class="container">
        <div class="row d-flex">
            <div class="search-container">
                  <div class="d-flex justify-content-center">
                      <input type="text" class="search-bar form-control" placeholder="Suche nach Log-Messages..." name="search">
                      <button type="button" class="btn btn-warning search-button">Suchen</button>
                      <input type="hidden" class="onSubmit" onclick="readyForSearch()">
                  </div>
            </div>
        </div>
    </div>
</div>
<!-- Searchbar -->


<!-- Filter-Menu -->
<div class="filter-menu">
    <div class="container">
        <div class="collapse" id="collapseFilter">
            <div class="d-flex flex-row row" id="FilterContainer">
            <!-- Date-Picker -->
                    <div class="flex-column p-4 col-md-4 text-center border rounded-3">
                        <div class="container">
                            <h5 class="filter-header">Zeitraum beschr√§nken: </h5>
                            <div class=" mt-3">
                                <label for="startDate">Start</label>
                                <input type="text"  class="form-control" id="startDate" oninput="checkInputValidity(this.id)" onchange="checkInputValidity(this.id)" required>
                                <span id="startDateSelected"></span>
                            </div>
                            <input id="startTime" class="form-control" type="input" pattern="^(1\d|2[0-3]|0?\d)(:(([1-5])\d|0?\d)){0,2}$" oninput="addTime(this.id)"  placeholder="00:00:00" disabled/>
                            <div class=" mt-3">
                                <label for="startDate">End</label>
                                <input type="text"  class="form-control" id="endDate" oninput="checkInputValidity(this.id)" onchange="checkInputValidity(this.id)"  required >
                                <span id="endDateSelected"></span>
                            </div>
                            <input id="endTime" class="form-control" type="input" pattern="^(1\d|2[0-3]|0?\d)(:(([1-5])\d|0?\d)){0,2}$" oninput="addTime(this.id)" placeholder="00:00:00" disabled />
                        </div>
                    </div>
                <!-- Date-Picker -->

                <!-- Log-Level -->
                <div class="d-flex flex-column p-4 col-md-4 text-center border rounded-3">
                        <div class="container">
                            <h5 class="filter-header" class="mb-3">Log-Level: </h5>
                            <div class="form-check">
                                    <div class="row align-items-center">
                                    <div class="col">
                                        <div>
                                            <div class="mt-3">
                                                <input class="form-check-input logLevelCheckbox" type="checkbox" name="INFO" value="INFO" id="FilterINFO">
                                                <label class="form-check-label" for="FilterINFO">
                                                    INFO
                                                </label>
                                            </div>
                                            <div class="mt-3">
                                                <input class="form-check-input logLevelCheckbox" type="checkbox" name="DEBUG" value="DEBUG" id="FilterDEBUG">
                                                <label class="form-check-label" for="FilterDEBUG">
                                                    DEBUG
                                                </label>
                                            </div>
                                            <div class="mt-3">
                                                <input class="form-check-input logLevelCheckbox" type="checkbox" name="WARN" value="WARN" id="FilterWARN">
                                                <label class="form-check-label" for="FilterWARN">
                                                    WARN
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div>
                                            <div class="mt-3">
                                                <input class="form-check-input logLevelCheckbox" type="checkbox" name="ERROR" value="ERROR" id="FilterERROR">
                                                <label class="form-check-label" for="FilterERROR">
                                                    ERROR
                                                </label>
                                            </div>
                                            <div class="mt-3">
                                                <input class="form-check-input logLevelCheckbox" type="checkbox" name="TRACE" value="TRACE" id="FilterTRACE">
                                                <label class="form-check-label" for="FilterTRACE">
                                                    TRACE
                                                </label>
                                            </div>
                                            <div class="mt-3">
                                                <input class="form-check-input logLevelCheckbox" type="checkbox" name="FATAL" value="FATAL" id="FilterFATAL">
                                                <label class="form-check-label" for="FilterFATAL">
                                                    FATAL
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            <!-- Log-Level -->

            <!-- Other options -->
                    <div class="d-flex flex-column p-4 col-md-4 text-center border rounded-3">
                            <div class="container">
                                <h5 class="filter-header mb-2">Weitere Optionen </h5>
                                <div>
                                    <label for="modulDataList" class="form-label">Modul:</label>
                                    <input class="form-control" list="datalistOptionsModul" id="modulDataList" oninput="checkIfListInputExists(this.id, this.list.id)" placeholder="Drop down or Search">
                                    <datalist id="datalistOptionsModul">
                                        <option value="Modul 1">
                                        <option value="Kein Modul">
                                        <option value="Vielleicht Modul 2">
                                        <option value="Modul 2">
                                        <option value="ludoM 3">
                                    </datalist>
                                </div>
                                <div>
                                    <label for="classDataList" class="form-label">Klasse:</label>
                                    <input class="form-control" list="datalistOptionsClass" id="classDataList" oninput="checkIfListInputExists(this.id, this.list.id)" placeholder="Drop down or Search">
                                    <datalist id="datalistOptionsClass">
                                        <option value="Modul 1">
                                        <option value="Kein Modul">
                                        <option value="Vielleicht Modul 2">
                                        <option value="Modul 2">
                                        <option value="ludoM 3">
                                    </datalist>
                                </div>
                                <div>
                                    <label for="exceptionDataList" class="form-label">Exception:</label>
                                    <input class="form-control" list="datalistOptionsClass" id="exceptionDataList" oninput="checkIfListInputExists(this.id, this.list.id)" placeholder="Drop down or Search">
                                    <datalist id="datalistOptionsException">
                                        <option value="Modul 1">
                                        <option value="Kein Modul">
                                        <option value="Vielleicht Modul 2">
                                        <option value="Modul 2">
                                        <option value="ludoM 3">
                                    </datalist>
                                </div>
                            </div>
                        </div>
                    </div>
             <!-- Other options -->
                </div>
            </div>
            <div class="text-center justify-content-center">
                <button onclick="onCollapseFilter(document.getElementById('btnFilter'), document.getElementById('btnFilter').innerText == 'Filter ausklappen')" id="btnFilter" class="btn button-style" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFilter" aria-expanded="false" aria-controls="collapseFilter">Filter ausklappen</button>
            </div>
        </div>
    </div>
</form>
<!-- Filter-Menu -->

<!-- Statistics -->
<div class="statistics">
    <div class="container">
        <div class="collapse" id="collapseStatistics">
            <div class="w-100" id="StatisticsContainer">
                <!-- Statistics Dropdown Button -->
                <div class="dropdown text-center">
                    <button class="btn dropdown-toggle button-style" type="button" id="statisticsDropDown" data-bs-toggle="dropdown" aria-expanded="false">
                        Display statistics
                    </button>
                    <ul class="dropdown-menu p-2" aria-labelledby="statisticsDropDown">
                        <li>
                            <input class="form-check-input statisticsCheckbox" type="checkbox" value="" id="showbarChart" onclick="onShowStatistics(document.getElementById('showbarChart'), 'barChart', 2)">
                            <label class="form-check-label" for="showbarChart">
                                Show Bar-Chart
                            </label>
                        </li>
                        <li>
                            <input class="form-check-input statisticsCheckbox" type="checkbox" value="" id="showpieChart" onclick="onShowStatistics(document.getElementById('showpieChart'), 'pieChart', 1)">
                            <label class="form-check-label" for="showpieChart">
                                Show Pie-Chart
                            </label>
                        </li>
                        <li>
                            <input class="form-check-input statisticsCheckbox" type="checkbox" value="" id="showlineChart" onclick="onShowStatistics(document.getElementById('showlineChart'), 'lineChart', 2)">
                            <label class="form-check-label" for="showlineChart">
                                Show Line-Chart
                            </label>
                        </li>
                        <li>
                            <input class="form-check-input statisticsCheckbox" type="checkbox" value="" id="showpolarAreaChart" onclick="onShowStatistics(document.getElementById('showpolarAreaChart'), 'polarAreaChart', 1)">
                            <label class="form-check-label" for="showpolarAreaChart">
                                Show PolarArea-Chart
                            </label>
                        </li>
                    </ul>
                </div>
                <!-- Statistics Dropdown Button -->

                <!-- Statistics Container -->
                <div class="coll">
                    <div>
                        <div class="d-flex flex-row row" id="statisticsHolder">
                        </div>
                    </div>
                </div>
                <!-- Statistics Container-->

            </div>
        </div>
    </div>
    <div class="text-center justify-content-center">
        <button onclick="onCollapseFilter(document.getElementById('btnStatistics'), document.getElementById('btnStatistics').innerText == 'Statistiken ausklappen')" id="btnStatistics" class="btn button-style" type="button" data-bs-toggle="collapse" data-bs-target="#collapseStatistics" aria-expanded="false" aria-controls="collapseStatistics">Statistiken ausklappen</button>
    </div>
</div>
<!-- Statistics -->

<!-- Logfile results -->
<a data-bs-toggle="modal" data-bs-target="#logModal">
<div class="logfile-results">
    <div class="container">
        <div class="column" id="logFileElementHolder">
            <!--<div class="row mt-2">
                <div class="col-md-3 justify-content-center text-center log-date log-center border rounded-3">
                    <p class="my-3">08.06.2022 18:15</p>
                </div>
                <div class="col-md-6 border rounded-3">
                    <p> Loremagna aliqua. Dolor morbi non arcu risus quis varius quam quisque. Nunc scelerisque viver...</p>
                </div>
                <div class="col-md-3 log-center border rounded-3">
                    &lt;!&ndash;<p class="my-3">Log-Level</p>&ndash;&gt;
                    <span class="log-center h-100 badge badge-color" style="background-color: #5188ca">D</span>
                    <span class="log-center h-100 badge badge-color" style="background-color: #ff7168">E</span>
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-md-3 justify-content-center text-center log-date log-center border rounded-3">
                    <p class="my-3">08.06.2022 18:15</p>
                </div>
                <div class="col-md-6 border rounded-3">
                    <p> Loremagna aliqua. Dolor morbi non arcu risquis quis varius quam quisque. Nunc scelerisque viver...quis varius quam quisque. Nunc scelerisque viver...quis vari
                        Loremagna aliqua. Dolor morbi non arcu risquis quis varius quam quisque. Nunc quisque. Nunc
                    </p>
                </div>
                <div class="col-md-3 log-center border rounded-3">
                    &lt;!&ndash;<p class="my-3">Log-Level</p>&ndash;&gt;
                    <span class="log-center h-100 badge badge-color" style="background-color: #36c590">I</span>
                    <span class="log-center h-100 badge badge-color" style="background-color: #fbf571">W</span>
                    <span class="log-center h-100 badge badge-color" style="background-color: #ffa566">T</span>
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-md-3 justify-content-center text-center log-date log-center border rounded-3">
                    <p class="my-3">08.06.2022 18:15</p>
                </div>
                <div class="col-md-6 border rounded-3">
                    <p class="my-3">  quis varius quam quisque. Nunc scelerisque viver...</p>
                </div>
                <div class="col-md-3 log-center border rounded-3">
                    &lt;!&ndash;<p class="my-3">Log-Level</p>&ndash;&gt;
                    <span class="log-center h-100 badge badge-color" style="background-color: #36c590">I</span>
                    <span class="log-center h-100 badge badge-color" style="background-color: #5188ca">D</span>
                    <span class="log-center h-100 badge badge-color" style="background-color: #fbf571">W</span>
                    <span class="log-center h-100 badge badge-color" style="background-color: #ff7168">E</span>
                    <span class="log-center h-100 badge badge-color" style="background-color: #ffa566">T</span>
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-md-3 justify-content-center text-center log-date log-center border rounded-3">
                    <p class="my-3">08.06.2022 18:15</p>
                </div>
                <div class="col-md-6 border rounded-3">
                    <p>  quis varius quam quisque. Nunc scelerisque viver...</p>
                </div>
                <div class="col-md-3 log-center border rounded-3">
                    &lt;!&ndash;<p class="my-3">Log-Level</p>&ndash;&gt;
                    <span class="log-center h-100 badge badge-color" style="background-color: #36c590">I</span>
                    <span class="log-center h-100 badge badge-color" style="background-color: #5188ca">D</span>
                    <span class="log-center h-100 badge badge-color" style="background-color: #fbf571">W</span>
                    <span class="log-center h-100 badge badge-color" style="background-color: #ff7168">E</span>
                    <span class="log-center h-100 badge badge-color" style="background-color: #ffa566">T</span>
                    <span class="log-center h-100 badge badge-color" style="background-color: #c978b8">F</span>
                </div>
            </div>-->
        </div>
    </div>
</div>
</a>
<!-- Logfile results -->

<!-- Settings Modal -->
<div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModal" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Settings</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <label for="path" class="form-label">Log folder path:</label>
                <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon3">current path</span>
                    <input type="text" class="form-control" id="path" aria-describedby="basic-addon3">
                </div>
                <div class="d-flex bd-highlight">
                    <button data-bs-dismiss="modal" class="btn btn-warning mt-3 m-1 w-100" type="submit">Ok</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Settings Modal -->

<!-- Log Modal -->
<div class="modal fade" id="logModal" tabindex="-1" aria-labelledby="logModal" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Log Eintrag:</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="table-wrapper">
                    <table class="table log-table">
                        <thead>
                        <tr class="sticky-header">
                            <th scope="col">Datum</th>
                            <th scope="col">Log Level</th>
                            <th scope="col">Modul</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>Mark</td>
                            <td>Otto</td>
                            <td>@mdo</td>
                        </tr>
                        <tr>
                            <td>Jacob</td>
                            <td>Thornton</td>
                            <td>@fat</td>
                        </tr>
                        <tr>
                            <td>Larry the Bird</td>
                            <td>Thornton</td>
                            <td>@twitter</td>
                        </tr>
                        <tr>
                            <td>Larry the Bird</td>
                            <td>Thornton</td>
                            <td>@twitter</td>
                        </tr>
                        <tr>
                            <td>Larry the Bird</td>
                            <td>Thornton</td>
                            <td>@twitter</td>
                        </tr>
                        <tr>
                            <td>Larry the Bird</td>
                            <td>Thornton</td>
                            <td>@twitter</td>
                        </tr>
                        <tr>
                            <td>Larry the Bird</td>
                            <td>Thornton</td>
                            <td>@twitter</td>
                        </tr>
                        <tr>
                            <td>Larry the Bird</td>
                            <td>Thornton</td>
                            <td>@twitter</td>
                        </tr>
                        <tr>
                            <td>Larry the Bird</td>
                            <td>Thornton</td>
                            <td>@twitter</td>
                        </tr>
                        <tr>
                            <td>Larry the Bird</td>
                            <td>Thornton</td>
                            <td>@twitter</td>
                        </tr>
                        <tr>
                            <td>Larry the Bird</td>
                            <td>Thornton</td>
                            <td>@twitter</td>
                        </tr>
                        <tr>
                            <td>Larry the Bird</td>
                            <td>Thornton</td>
                            <td>@twitter</td>
                        </tr>
                        <tr>
                            <td>Larry the Bird</td>
                            <td>Thornton</td>
                            <td>@twitter</td>
                        </tr>
                        <tr>
                            <td>Larry the Bird</td>
                            <td>Thornton</td>
                            <td>@twitter</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="form-floating mt-3">
                    <textarea disabled class="form-control log-textArea" style="height: 15rem;" placeholder="Click on Log entry to see message" id="floatingTextarea"> Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</textarea>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Log Modal -->

<!-- Cookie-Script -->
<script src="js/Cookie.js"></script>
<!-- Validation-Script -->
<script src="js/Validation.js"></script>
<!-- Statistics-Script -->
<script src="js/Statistics.js"></script>
<script>
    //TODO: Add message to texArea
    document.querySelectorAll(".table > tbody > tr").forEach(row => row.addEventListener("click", evt => {
        document.getElementById("floatingTextarea").innerText = row.innerHTML;
    }))

   //TODO: Add red if its a NullPointerException
    /* document.querySelectorAll(".table > tbody > tr").forEach();*/

    //TODO: Add yellow if they are searched for (only if fetch nearby is active)
   /* document.querySelectorAll(".table > tbody > tr").forEach();*/
</script>
</body>
</html>
